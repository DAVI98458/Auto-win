-- Copiar link da key ao iniciar
setclipboard("https://lootdest.org/s?nJO3MzzM")

-- ServiÃ§os
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local UIS = game:GetService("UserInputService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- VariÃ¡veis de controle
local ESPAtivado = false
local AimbotAtivado = false
local TeamCheck = false
local DeadCheck = false
local WallCheck = false
local InfJumpAtivado = false
local NoClipAtivado = false

-- Rayfield UI
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
local Window = Rayfield:CreateWindow({
	Name = "Red Light, Green Light and Glass Bridge",
	LoadingTitle = "Iniciando...",
	LoadingSubtitle = "by @shadown_gd",
	KeySystem = true,
	KeySettings = {
		Title = "Key System",
		Subtitle = "Acesso necessÃ¡rio",
		Note = "The key link has already been copied",
		FileName = "ScriptKey_v1",
		SaveKey = false,
		Key = "11.7ðŸ¥³"
	}
})

-- FunÃ§Ãµes de ESP
local function limparESP()
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr.Character and plr.Character:FindFirstChild("Head") then
			local gui = plr.Character.Head:FindFirstChild("ESPName")
			if gui then
				gui:Destroy()
			end
		end
	end
end

local function atualizarESP()
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr.Character and plr.Character:FindFirstChild("Head") and not plr.Character.Head:FindFirstChild("ESPName") then
			local gui = Instance.new("BillboardGui")
			gui.Name = "ESPName"
			gui.Size = UDim2.new(0, 100, 0, 40)
			gui.StudsOffset = Vector3.new(0, 2.5, 0)
			gui.AlwaysOnTop = true
			gui.Adornee = plr.Character.Head
			gui.Parent = plr.Character.Head

			local label = Instance.new("TextLabel", gui)
			label.Size = UDim2.new(1, 0, 1, 0)
			label.BackgroundTransparency = 1
			label.Text = plr.Name
			label.TextColor3 = plr.TeamColor.Color
			label.TextSize = 11
			label.Font = Enum.Font.SourceSansBold
			label.TextStrokeTransparency = 0.5
		end
	end
end

task.spawn(function()
	while true do
		if ESPAtivado then
			atualizarESP()
		else
			limparESP()
		end
		task.wait(1)
	end
end)

-- Aba: Auto Win
local AutoTab = Window:CreateTab("Auto Win")
AutoTab:CreateButton({
	Name = "Auto Win Glass Bridge",
	Callback = function()
		Rayfield:Notify({Title = "Glass Bridge", Content = "wait 3 seconds", Duration = 3})
		LocalPlayer.Character:MoveTo(Vector3.new(-22, 161, 1546))
		task.wait(3)
		LocalPlayer.Character:MoveTo(Vector3.new(195, 161, 1548))
	end
})
AutoTab:CreateButton({
	Name = "Auto Win Red Light and Green Light",
	Callback = function()
		Rayfield:Notify({Title = "Red Light Green Light", Content = "wait 4 seconds", Duration = 4})
		LocalPlayer.Character:MoveTo(Vector3.new(338, 4, -189))
		task.wait(4)
		LocalPlayer.Character:MoveTo(Vector3.new(-249, 4, -184))
	end
})
AutoTab:CreateButton({
	Name = "Safezone",
	Callback = function()
		LocalPlayer.Character:MoveTo(Vector3.new(383, 4, -80))
	end
})

-- Aba: Aimbot
local AimbotTab = Window:CreateTab("Aimbot")
AimbotTab:CreateToggle({
	Name = "On Aimbot",
	CurrentValue = false,
	Callback = function(val) AimbotAtivado = val end
})
AimbotTab:CreateToggle({
	Name = "ESP All Nickname",
	CurrentValue = false,
	Callback = function(val) ESPAtivado = val end
})
AimbotTab:CreateToggle({
	Name = "Team Check",
	CurrentValue = false,
	Callback = function(val) TeamCheck = val end
})
AimbotTab:CreateToggle({
	Name = "Dead Check",
	CurrentValue = false,
	Callback = function(val) DeadCheck = val end
})
AimbotTab:CreateToggle({
	Name = "Wall Check",
	CurrentValue = false,
	Callback = function(val) WallCheck = val end
})

-- Aimbot funcional corrigido
RunService.RenderStepped:Connect(function()
	if not AimbotAtivado then return end
	local target = nil
	local shortest = math.huge
	for _, plr in ipairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("Head") then
			local hum = plr.Character:FindFirstChildOfClass("Humanoid")
			if hum and hum.Health > 0 then
				if TeamCheck and plr.Team == LocalPlayer.Team then continue end
				if DeadCheck and hum.Health <= 0 then continue end

				if WallCheck then
					local origin = Camera.CFrame.Position
					local direction = (plr.Character.Head.Position - origin).Unit * 500
					local raycastParams = RaycastParams.new()
					raycastParams.FilterDescendantsInstances = {LocalPlayer.Character}
					raycastParams.FilterType = Enum.RaycastFilterType.Blacklist
					local raycastResult = workspace:Raycast(origin, direction, raycastParams)
					if raycastResult and raycastResult.Instance and not raycastResult.Instance:IsDescendantOf(plr.Character) then
						continue
					end
				end

				local pos, onScreen = Camera:WorldToScreenPoint(plr.Character.Head.Position)
				if onScreen then
					local dist = (Vector2.new(pos.X, pos.Y) - UIS:GetMouseLocation()).Magnitude
					if dist < shortest then
						shortest = dist
						target = plr
					end
				end
			end
		end
	end

	if target and target.Character and target.Character:FindFirstChild("Head") then
		Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character.Head.Position)
	end
end)

-- Aba: Modifiers
local ModTab = Window:CreateTab("Modifiers")
ModTab:CreateSlider({
	Name = "WalkSpeed",
	Range = {16, 300},
	Increment = 1,
	CurrentValue = 16,
	Callback = function(v)
		local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then hum.WalkSpeed = v end
	end
})
ModTab:CreateSlider({
	Name = "JumpPower",
	Range = {50, 500},
	Increment = 1,
	CurrentValue = 50,
	Callback = function(v)
		local hum = LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid")
		if hum then
			hum.UseJumpPower = true
			hum.JumpPower = v
		end
	end
})
ModTab:CreateToggle({
	Name = "NoClip",
	CurrentValue = false,
	Callback = function(v)
		NoClipAtivado = v
	end
})
ModTab:CreateToggle({
	Name = "Infinite Jump",
	CurrentValue = false,
	Callback = function(v)
		InfJumpAtivado = v
	end
})

-- NoClip e InfJump
RunService.Stepped:Connect(function()
	if NoClipAtivado and LocalPlayer.Character then
		for _, part in pairs(LocalPlayer.Character:GetDescendants()) do
			if part:IsA("BasePart") then
				part.CanCollide = false
			end
		end
	end
end)

UIS.JumpRequest:Connect(function()
	if InfJumpAtivado and LocalPlayer.Character and LocalPlayer.Character:FindFirstChildOfClass("Humanoid") then
		LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState(Enum.HumanoidStateType.Jumping)
	end
end)

-- Aba: Credits
local CredTab = Window:CreateTab("Credits")
CredTab:CreateParagraph({Title = "Diretor", Content = "@shadown_gd"})
CredTab:CreateParagraph({Title = "Programadores", Content = "@shadown_gd and @Shadownchavoso"})
CredTab:CreateButton({
	Name = "DISCORD",
	Callback = function()
		setclipboard("https://discord.gg/baSasGFhaG")
		Rayfield:Notify({Title = "Copiado", Content = "Link do Discord copiado!", Duration = 3})
	end
})
