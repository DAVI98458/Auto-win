-- Copia automaticamente o link da key
setclipboard("https://lootdest.org/s?nJO3MzzM")

-- Carregamento oficial da Rayfield
loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- Cria√ß√£o da Janela com sistema de Key configurado
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()
local Window = Rayfield:CreateWindow({
    Name = "red light, Green light and Glass bridge",
    LoadingTitle = "Shadow Hub",
    LoadingSubtitle = "by @shadown_gd",
    ConfigurationSaving = {
        Enabled = false
    },
    Discord = {
        Enabled = false
    },
    KeySystem = true,
    KeySettings = {
        Title = "Shadow Hub Key",
        Subtitle = "Enter your key below",
        Note = "The key link has already been copied to your clipboard",
        FileName = "ShadowHubKeyFile",
        SaveKey = false,
        GrabKeyFromSite = false,
        Key = "11.7ü•≥"
    }
})

-- Servi√ßos
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- Aimbot
local AimbotEnabled = false
local AimbotNormal = false
local TeamCheck = false
local DeadCheck = false
local WallCheck = false

-- ESP
local ESPEnabled = false
local ESPObjects = {}

-- Auto ESP refresh
RunService.Stepped:Connect(function()
    if ESPEnabled then
        for _, esp in pairs(ESPObjects) do
            if esp.TextLabel then
                esp.TextLabel:Destroy()
            end
        end
        ESPObjects = {}

        for _, player in ipairs(Players:GetPlayers()) do
            if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
                local teamColor = player.TeamColor.Color
                local head = player.Character:FindFirstChild("Head")

                local textLabel = Drawing.new("Text")
                textLabel.Text = player.Name
                textLabel.Color = teamColor
                textLabel.Size = 11
                textLabel.Center = true
                textLabel.Outline = true
                textLabel.Visible = true

                ESPObjects[player] = {TextLabel = textLabel, Head = head}
            end
        end
    else
        for _, esp in pairs(ESPObjects) do
            if esp.TextLabel then
                esp.TextLabel:Remove()
            end
        end
        ESPObjects = {}
    end
end)

RunService.RenderStepped:Connect(function()
    for _, data in pairs(ESPObjects) do
        local pos, visible = Camera:WorldToViewportPoint(data.Head.Position)
        if visible then
            data.TextLabel.Position = Vector2.new(pos.X, pos.Y)
            data.TextLabel.Visible = true
        else
            data.TextLabel.Visible = false
        end
    end
end)

-- Fun√ß√£o Aimbot
local function getClosestPlayer()
    local closest = nil
    local shortest = math.huge
    for _, player in ipairs(Players:GetPlayers()) do
        if player ~= LocalPlayer and player.Character and player.Character:FindFirstChild("Head") then
            if TeamCheck and player.Team == LocalPlayer.Team then
                continue
            end
            if DeadCheck and (not player.Character:FindFirstChild("Humanoid") or player.Character.Humanoid.Health <= 0) then
                continue
            end
            if WallCheck then
                local origin = Camera.CFrame.Position
                local direction = (player.Character.Head.Position - origin).Unit * 1000
                local ray = Ray.new(origin, direction)
                local part = workspace:FindPartOnRay(ray, LocalPlayer.Character, false, true)
                if part and not player.Character:IsAncestorOf(part) then
                    continue
                end
            end

            if AimbotEnabled and player.Character.Humanoid.MoveDirection.Magnitude == 0 then
                continue
            end

            local screenPoint, visible = Camera:WorldToViewportPoint(player.Character.Head.Position)
            if visible then
                local distance = (Vector2.new(screenPoint.X, screenPoint.Y) - Vector2.new(Camera.ViewportSize.X/2, Camera.ViewportSize.Y/2)).Magnitude
                if distance < shortest then
                    closest = player
                    shortest = distance
                end
            end
        end
    end
    return closest
end

RunService.RenderStepped:Connect(function()
    if AimbotEnabled or AimbotNormal then
        local target = getClosestPlayer()
        if target then
            Camera.CFrame = CFrame.new(Camera.CFrame.Position, target.Character.Head.Position)
        end
    end
end)

-- Interface - Aimbot
local AimbotTab = Window:CreateTab("Aimbot", 4483362458)
AimbotTab:CreateToggle({
    Name = "On Aimbot(only aim at those who move)",
    CurrentValue = false,
    Callback = function(Value)
        AimbotEnabled = Value
    end
})
AimbotTab:CreateToggle({
    Name = "Aimbot Normal(this is really normal)",
    CurrentValue = false,
    Callback = function(Value)
        AimbotNormal = Value
    end
})
AimbotTab:CreateToggle({
    Name = "Team Check",
    CurrentValue = false,
    Callback = function(Value)
        TeamCheck = Value
    end
})
AimbotTab:CreateToggle({
    Name = "Dead Check",
    CurrentValue = false,
    Callback = function(Value)
        DeadCheck = Value
    end
})
AimbotTab:CreateToggle({
    Name = "Wall Check",
    CurrentValue = false,
    Callback = function(Value)
        WallCheck = Value
    end
})
AimbotTab:CreateToggle({
    Name = "ESP All Nickname",
    CurrentValue = false,
    Callback = function(Value)
        ESPEnabled = Value
    end
})

-- Interface - Auto Win
local AutoWinTab = Window:CreateTab("Auto Win", 4483362458)
AutoWinTab:CreateButton({
    Name = "Safezone",
    Callback = function()
        LocalPlayer.Character:MoveTo(Vector3.new(383, 4, -80))
    end
})
AutoWinTab:CreateButton({
    Name = "Red Light & Green Light Auto Win",
    Callback = function()
        LocalPlayer.Character:MoveTo(Vector3.new(339, 4, -123))
        wait(4)
        LocalPlayer.Character:MoveTo(Vector3.new(-247, 4, -187))
    end
})
AutoWinTab:CreateToggle({
    Name = "Anti-Fall",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            RunService.Stepped:Connect(function()
                if LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart") then
                    local vel = LocalPlayer.Character.HumanoidRootPart.Velocity
                    if vel.Y < -2 then
                        LocalPlayer.Character.HumanoidRootPart.Velocity = Vector3.new(vel.X, -6, vel.Z)
                    end
                end
            end)
        end
    end
})

-- Interface - Modifiers
local ModTab = Window:CreateTab("Modifiers", 4483362458)
ModTab:CreateSlider({
    Name = "WalkSpeed",
    Range = {16, 300},
    Increment = 1,
    CurrentValue = 16,
    Callback = function(Value)
        LocalPlayer.Character.Humanoid.WalkSpeed = Value
    end
})
ModTab:CreateToggle({
    Name = "Noclip",
    CurrentValue = false,
    Callback = function(Value)
        RunService.Stepped:Connect(function()
            if Value and LocalPlayer.Character then
                for _, part in ipairs(LocalPlayer.Character:GetDescendants()) do
                    if part:IsA("BasePart") then
                        part.CanCollide = false
                    end
                end
            end
        end)
    end
})
ModTab:CreateToggle({
    Name = "Infinite Jump",
    CurrentValue = false,
    Callback = function(Value)
        if Value then
            game:GetService("UserInputService").JumpRequest:Connect(function()
                LocalPlayer.Character:FindFirstChildOfClass("Humanoid"):ChangeState("Jumping")
            end)
        end
    end
})

-- Interface - Credits
local CreditsTab = Window:CreateTab("Credits", 4483362458)
CreditsTab:CreateLabel("Direitor: @shadown_gd")
CreditsTab:CreateLabel("Programador: @shadown_gd and @Shadownchavoso")
CreditsTab:CreateButton({
    Name = "DISCORD",
    Callback = function()
        setclipboard("https://discord.gg/baSasGFhaG")
    end
})
